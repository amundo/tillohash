<!DOCTYPE html>
<html>
<head>
  <title>srsly?</title>
  <meta charset=utf-8>
  <script src=code/js/jquery.js></script>
  <script src=code/js/jquery.autoGrowInput.js></script>
  <link rel=stylesheet href="css/print.css" media=print />

<style>
body { 
  font-family: Verdana,Geneva,Arial,Helvetica,sans-serif;
}

header { 
  display: none;
}

#line { 
  width: 80%;
  margin: 5px;
  font-size: large;
}

#phrases { 
  overflow: hidden;
  border: 1px solid #BEDCE7;
  padding: 1em;
  width: 60%;
}

li.phrase { 
  overflow: auto;
}

li {
  list-style-type: none;
}

ol.tier { 
  float:left;
  font-size: small;
  margin-left: .5em;
  padding: 0;
}

li.word { 
  font-size: 1.1em;
  font-weight: bold;
  font-variant: italic;
}

li.gloss { 
  margin-bottom: .5em;
}

li.gloss input { 
}

li.gloss input:focus { 
  background: white;
}

</style>
<script>


(function($) { 
  $.fn.gloss = (function(settings){
  
    return $(this).each(function(){

      $this = $(this); // convenience

      words = $.fn.gloss.tokenize($this.text()); // tokenize text

      $sentence = $('<ol/>', {'class': 'sentence','css': 'color:red'}).appendTo($this);

      $.each(words, function(i,word){ 
        $('<li/>', {'html': word})
          .appendTo($sentence)  
      }); 

      $this.find('ol.sentence li').each(function(i,li){ 
        $li = $(this);
        $li.append($.fn.gloss.buildTiers($li));
      });

    });
  
  });

  $.fn.gloss.tokenize = function(text){
    return $.trim(text).split(' ');
  }

  $.fn.gloss.buildTiers = function($li){
    $tiers = $('<ol/>', {'class': 'tier'});

    var word = $li.text();
    $li.text('');

    $('<li/>', {'class': 'word', html: word})
      .appendTo($tiers);

    $('<li/>', {'class': 'gloss'})
      .append($('<input/>', {'type': 'text'} ))
      .appendTo($tiers);

    return $tiers;

  }

})(jQuery);



$(document).ready(function(){

  $('#line').keyup(function(ev){
    if(ev.which == 13) {
      var phrase = $(this).val();
      $('<li/>', {'class': 'phrase', 'html': phrase}).prependTo('#phrases');

      $('.phrase:first').gloss().find('input:first').focus();
    }
  });


  $('input').keyup(function(e){
    if(e.which == 13){ 

      var gloss = $(this).val();

    }
  });

})

</script>

</head>
<body>

<header>
<nav>
<a href=#>link</a>
</nav>
</header>

<input id=line></input>

<ol id=phrases>
</ol>

</body>

</html>

